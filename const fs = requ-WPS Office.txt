const fs = require('fs');

// Функция для получения заката для Патонга
const getSunsetTime = () => {
  // Пример фиксированного времени заката, можно заменить на API погоды для точного расчета
  return "17:30";
};

// Получаем сегодняшнюю дату
const today = new Date();
const yyyy = today.getFullYear();
const mm = String(today.getMonth() + 1).padStart(2, '0');
const dd = String(today.getDate()).padStart(2, '0');
const dateStr = `${yyyy}-${mm}-${dd}`;

// Время заката
const sunsetTime = getSunsetTime();

// Время ужина за 1 час 20 минут до заката
const [hours, minutes] = sunsetTime.split(':').map(Number);
let dinnerHours = hours - 1;
let dinnerMinutes = minutes - 20;
if (dinnerMinutes < 0) {
  dinnerMinutes += 60;
  dinnerHours -= 1;
}
const dinnerStart = `${String(dinnerHours).padStart(2,'0')}:${String(dinnerMinutes).padStart(2,'0')}`;

// Формируем объект для events.json
const events = {
  date: dateStr,
  sunsetTime: sunsetTime,
  dinnerStart: dinnerStart
};

// Сохраняем в events.json
fs.writeFileSync('events.json', JSON.stringify(events, null, 2));

console.log('events.json обновлён автоматически!');

